<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartFold â€” Subscription Plans</title>
    <link rel="stylesheet" href="css/style.css" />
</head>

<body class="subscriptions-page">
    <header class="navbar app-bar">
        <div class="container-xl app-bar-inner">
            <div class="app-brand">
                <a href="login.html" class="brand-heading">SmartFold</a>
            </div>
            <div class="app-actions">
                <button id="theme-toggle" class="btn-pill pill-ghost" aria-label="Toggle Dark Mode">Theme</button>
                <a href="dashboard-user.html" class="pill-ghost">My Dashboard</a>
            </div>
        </div>
    </header>

    <main class="subscriptions-main" style="padding: calc(var(--navbar-height) + 40px) 0 60px;">
        <div class="container-xl">
            <section class="section-block" style="text-align: center; margin-bottom: 48px;">
                <h1 style="font-size: 2.5rem; margin-bottom: 12px;">Subscription Plans</h1>
                <p class="muted" style="max-width: 600px; margin: 0 auto;">
                    Save time and money with our recurring laundry service.
                    Choose a plan that fits your lifestyle and never worry about laundry again.
                </p>
            </section>

            <div class="subscription-plans" id="plans-container">
                <div class="plan-card">
                    <h3 class="plan-name">Monthly</h3>
                    <p class="plan-frequency">One pickup per month</p>
                    <div class="plan-discount">0%<span> off</span></div>
                    <p class="muted small-text" style="margin: 16px 0;">Pay per order, no commitment</p>
                    <ul style="text-align: left; margin: 20px 0; padding-left: 20px; color: var(--text);">
                        <li>Flexible scheduling</li>
                        <li>Standard pricing</li>
                        <li>Cancel anytime</li>
                    </ul>
                    <button class="btn-secondary full-width" data-plan="monthly">Select Plan</button>
                </div>

                <div class="plan-card recommended">
                    <h3 class="plan-name">Weekly</h3>
                    <p class="plan-frequency">Pickup every 7 days</p>
                    <div class="plan-discount">10%<span> off</span></div>
                    <p class="muted small-text" style="margin: 16px 0;">Best value for regular laundry</p>
                    <ul style="text-align: left; margin: 20px 0; padding-left: 20px; color: var(--text);">
                        <li>Auto-scheduled pickups</li>
                        <li>Priority service</li>
                        <li>10% discount on all orders</li>
                        <li>Pause anytime</li>
                    </ul>
                    <button class="btn-primary full-width" data-plan="weekly">Select Plan</button>
                </div>

                <div class="plan-card">
                    <h3 class="plan-name">Bi-Weekly</h3>
                    <p class="plan-frequency">Pickup every 14 days</p>
                    <div class="plan-discount">5%<span> off</span></div>
                    <p class="muted small-text" style="margin: 16px 0;">Perfect for smaller households</p>
                    <ul style="text-align: left; margin: 20px 0; padding-left: 20px; color: var(--text);">
                        <li>Auto-scheduled pickups</li>
                        <li>5% discount on all orders</li>
                        <li>Flexible rescheduling</li>
                        <li>Cancel anytime</li>
                    </ul>
                    <button class="btn-secondary full-width" data-plan="biweekly">Select Plan</button>
                </div>
            </div>

            <section class="section-block card-soft" style="margin-top: 48px; padding: 32px;">
                <h2 class="section-title" style="margin-bottom: 16px;">How Subscriptions Work</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 24px;">
                    <div style="text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 12px;">ðŸ“…</div>
                        <h4>1. Choose Your Plan</h4>
                        <p class="muted small-text">Select a frequency that works for your household.</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 12px;">ðŸšš</div>
                        <h4>2. We Pick Up</h4>
                        <p class="muted small-text">On your scheduled day, we'll collect your laundry.</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 12px;">âœ¨</div>
                        <h4>3. We Clean</h4>
                        <p class="muted small-text">Professional cleaning with care.</p>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2.5rem; margin-bottom: 12px;">ðŸ“¦</div>
                        <h4>4. We Deliver</h4>
                        <p class="muted small-text">Fresh, folded laundry returned to your door.</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script type="module">
        import { initTheme, toggleTheme, toastSuccess, getCurrentUser } from "./js/common.js";

        initTheme();
        document.getElementById("theme-toggle")?.addEventListener("click", toggleTheme);

        document.querySelectorAll("[data-plan]").forEach(btn => {
            btn.addEventListener("click", () => {
                const plan = btn.dataset.plan;
                const user = getCurrentUser();
                if (!user) {
                    window.location.href = `/login.html?redirect=subscriptions.html&plan=${plan}`;
                    return;
                }
                toastSuccess(`${plan.charAt(0).toUpperCase() + plan.slice(1)} plan selected! Redirecting...`);
                setTimeout(() => {
                    window.location.href = `/dashboard-user.html?subscription=${plan}`;
                }, 1000);
            });
        });
    </script>
</body>

</html>